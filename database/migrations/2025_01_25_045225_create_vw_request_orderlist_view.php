<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Support\Facades\DB;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        DB::statement("CREATE VIEW `vw_request_orderlist` AS select `" . env('DB_DATABASE') . "`.`request_order`.`row_id` AS `row_id`,`" . env('DB_DATABASE') . "`.`request_order`.`company_id` AS `company_id`,`" . env('DB_DATABASE') . "`.`request_order`.`doc_no` AS `doc_no`,`" . env('DB_DATABASE') . "`.`request_order`.`store_id` AS `store_id`,`" . env('DB_DATABASE') . "`.`store`.`name` AS `store_id_txt`,`" . env('DB_DATABASE') . "`.`request_order`.`customer_id` AS `customer_id`,`" . env('DB_DATABASE') . "`.`customer`.`name` AS `customer_id_txt`,`" . env('DB_DATABASE') . "`.`request_order`.`item_id` AS `item_id`,`" . env('DB_DATABASE') . "`.`item`.`name` AS `item_id_txt`,`" . env('DB_DATABASE') . "`.`request_order`.`sales_id` AS `sales_id`,`" . env('DB_DATABASE') . "`.`grouping_order`.`name` AS `grouping_order_id_txt`,`" . env('DB_DATABASE') . "`.`request_order`.`grouping_order_id` AS `grouping_order_id`,`" . env('DB_DATABASE') . "`.`request_order`.`identity_code` AS `identity_code`,`" . env('DB_DATABASE') . "`.`sysuser`.`name` AS `sales_id_txt`,`" . env('DB_DATABASE') . "`.`request_order`.`trans_date` AS `trans_date`,`" . env('DB_DATABASE') . "`.`request_order`.`estimated_date` AS `estimated_date`,`" . env('DB_DATABASE') . "`.`request_order`.`name` AS `name`,`" . env('DB_DATABASE') . "`.`request_order`.`type_order` AS `type_order`,`" . env('DB_DATABASE') . "`.`request_order`.`outsource_intern` AS `outsource_intern`,`" . env('DB_DATABASE') . "`.`request_order`.`qty` AS `qty`,`" . env('DB_DATABASE') . "`.`request_order`.`size` AS `size`,`" . env('DB_DATABASE') . "`.`request_order`.`warna_emas` AS `warna_emas`,`" . env('DB_DATABASE') . "`.`request_order`.`berat_emas` AS `berat_emas`,`" . env('DB_DATABASE') . "`.`request_order`.`kadar_emas` AS `kadar_emas`,`" . env('DB_DATABASE') . "`.`request_order`.`txt` AS `txt`,`" . env('DB_DATABASE') . "`.`request_order`.`notes` AS `notes`,`" . env('DB_DATABASE') . "`.`request_order`.`customer_material` AS `customer_material`,`" . env('DB_DATABASE') . "`.`request_order`.`estimated_price` AS `estimated_price`,`" . env('DB_DATABASE') . "`.`request_order`.`down_payment` AS `down_payment`,`" . env('DB_DATABASE') . "`.`request_order`.`settlement` AS `settlement`,`" . env('DB_DATABASE') . "`.`request_order`.`custom_box` AS `custom_box`,`" . env('DB_DATABASE') . "`.`request_order`.`online_offline` AS `online_offline`,`" . env('DB_DATABASE') . "`.`request_order`.`status` AS `status`,`" . env('DB_DATABASE') . "`.`request_order`.`is_sales_saved` AS `is_sales_saved`,`" . env('DB_DATABASE') . "`.`request_order`.`is_print_dp` AS `is_print_dp`,`" . env('DB_DATABASE') . "`.`request_order`.`photo_file` AS `photo_file`,`" . env('DB_DATABASE') . "`.`request_order`.`berat_jadi` AS `berat_jadi`,`" . env('DB_DATABASE') . "`.`request_order`.`work_estimated_date` AS `work_estimated_date`,`" . env('DB_DATABASE') . "`.`request_order`.`work_qty` AS `work_qty`,`" . env('DB_DATABASE') . "`.`request_order`.`work_length` AS `work_length`,`" . env('DB_DATABASE') . "`.`request_order`.`work_diameter` AS `work_diameter`,`" . env('DB_DATABASE') . "`.`request_order`.`work_ring_size` AS `work_ring_size`,`" . env('DB_DATABASE') . "`.`request_order`.`work_gold_content` AS `work_gold_content`,`" . env('DB_DATABASE') . "`.`request_order`.`work_notes` AS `work_notes`,`" . env('DB_DATABASE') . "`.`request_order`.`work_supplier` AS `work_supplier`,`" . env('DB_DATABASE') . "`.`request_order`.`work_status_order` AS `work_status_order`,`" . env('DB_DATABASE') . "`.`request_order`.`work_spk_no` AS `work_spk_no`,`" . env('DB_DATABASE') . "`.`request_order`.`work_jwcad_3d` AS `work_jwcad_3d`,`" . env('DB_DATABASE') . "`.`request_order`.`work_master` AS `work_master`,`" . env('DB_DATABASE') . "`.`request_order`.`work_pb` AS `work_pb`,`" . env('DB_DATABASE_SECOND') . "`.`spk`.`last_process` AS `last_process`,`" . env('DB_DATABASE') . "`.`request_order`.`is_submitted` AS `is_submitted`,`" . env('DB_DATABASE') . "`.`request_order`.`is_deleted` AS `is_deleted`,`" . env('DB_DATABASE') . "`.`request_order`.`created_date` AS `created_date`,`" . env('DB_DATABASE') . "`.`request_order`.`created_by` AS `created_by`,`" . env('DB_DATABASE') . "`.`request_order`.`modified_date` AS `modified_date`,`" . env('DB_DATABASE') . "`.`request_order`.`modified_by` AS `modified_by` from ((((((`" . env('DB_DATABASE') . "`.`request_order` left join `" . env('DB_DATABASE') . "`.`store` on(`" . env('DB_DATABASE') . "`.`request_order`.`store_id` = `" . env('DB_DATABASE') . "`.`store`.`row_id`)) left join `" . env('DB_DATABASE') . "`.`customer` on(`" . env('DB_DATABASE') . "`.`request_order`.`customer_id` = `" . env('DB_DATABASE') . "`.`customer`.`row_id`)) left join `" . env('DB_DATABASE') . "`.`sysuser` on(`" . env('DB_DATABASE') . "`.`request_order`.`sales_id` = `" . env('DB_DATABASE') . "`.`sysuser`.`row_id`)) left join `" . env('DB_DATABASE') . "`.`item` on(`" . env('DB_DATABASE') . "`.`request_order`.`item_id` = `" . env('DB_DATABASE') . "`.`item`.`row_id`)) left join `" . env('DB_DATABASE') . "`.`grouping_order` on(`" . env('DB_DATABASE') . "`.`request_order`.`grouping_order_id` = `" . env('DB_DATABASE') . "`.`grouping_order`.`row_id`)) left join `" . env('DB_DATABASE_SECOND') . "`.`spk` on(`" . env('DB_DATABASE_SECOND') . "`.`spk`.`request_order_no` = `" . env('DB_DATABASE') . "`.`request_order`.`doc_no` and `" . env('DB_DATABASE_SECOND') . "`.`spk`.`is_deleted` = 0))");
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        DB::statement("DROP VIEW IF EXISTS `vw_request_orderlist`");
    }
};
